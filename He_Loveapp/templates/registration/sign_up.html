{% extends 'He_Loveapp/base.html' %} 
{% block title %}S'enregistrer{% endblock %}
{% block content %}

<form method="post">
	{% csrf_token %} 
	{{form.as_p}}
	<input type="submit" value="Sign up" />
</form>

<script>
	var nbInterests = 0;
	var nbGenderInterests = 0;

	function changeColor(name, nbMax) {
		var i = 0;
		var checkbox = document.getElementById(name + i);
		while (checkbox != null) {
			// Change color on load
			if (checkbox.checked){
				checkbox.parentElement.parentElement.classList.add("selected");
			}

			// Change color event
			checkbox.addEventListener('change', (event) => {
				li = event.target.parentElement.parentElement;
				if (event.currentTarget.checked) {
					if (nbMax < 5){
						li.classList.add("selected");
						nbMax++;
					}
					else {
						event.target.checked = false;
					}
				} 
				else {
					if (li.classList.contains("selected")){
						li.classList.remove("selected");
						nbMax--;
					}
				}
			});
			
			i++;
			var checkbox = document.getElementById(name + i);
		}
	}

	changeColor("id_user_gender_interests_", nbGenderInterests);
	changeColor("id_user_interests_", nbInterests);

	document.getElementById("id_birth_date").type = "date";
</script>

{% endblock %}